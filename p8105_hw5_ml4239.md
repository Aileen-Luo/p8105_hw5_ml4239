p8105\_hw5\_ml4239
================
Man Luo
2018/11/7

P.1
---

### import and tidy data

``` r
data = 
  tibble(file_name = list.files(path = './data/P1')) %>% 
  mutate(name = map(.x = str_c("./data/P1/", file_name),~read_csv(.x))) %>% 
  unnest() %>% 
  separate(file_name, into = c("group", "id"), sep = "_",remove = F) %>% 
  gather(key = week, value = observation, week_1:week_8) %>% 
  mutate(week = str_replace(week, "week_", ""),
         file_name = str_replace(file_name, ".csv", ""),
         id = str_replace(id, ".csv", "")) 
```

### make a spaghetti

``` r
data %>% 
  ggplot(aes(x = week, y = observation, group = file_name, col = group))+
  geom_line() +
  labs(
    title = "Observations on Each Subject over Time",
    x = "Week",
    y = "Observation",
    caption = "Data from a longitudinal study") +
  theme(legend.position = "bottom")
```

<img src="p8105_hw5_ml4239_files/figure-markdown_github/unnamed-chunk-2-1.png" width="80%" />

**Comments**The control group has a lower observation data compared to experiment arm. Even thought control and experiment arms might have similar observations for the first several weeks, with the time goes, control group has a lower observations in the end.

P.2
---

``` r
homicide_data <- read_csv('./data/P2/homicide-data.csv') 
```

The raw data contains 52179, 12 observations including 52179 people with 12 variables. The variables includes:uid, reported\_date, victim\_last, victim\_first, victim\_race, victim\_age, victim\_sex, city, state, lat, lon, disposition

summarize within cities to obtain the total number of homicides and the number of unsolved homicides

``` r
homicide_data_city_state<-homicide_data %>%  
  mutate(city_state = str_c(city, ",", state)) 

  
homicide_num<-homicide_data_city_state %>%   
  group_by(city_state) %>%
  summarise( total_homicide = n(),
    unsolved_homicide = sum(disposition == "Closed without arrest" | disposition == "Open/No arrest")) %>% 
  knitr::kable()
```
